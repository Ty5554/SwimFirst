<header class="bg-sky-900 text-white shadow-md">
  <div class="flex justify-between items-center p-4">
    <!-- ロゴ -->
    <div>
      <%= link_to "SwimFirst", root_path, class: "text-xl font-bold text-cyan-300 hover:text-white" %>
      <% if user_signed_in? %>
        <div class="flex items-center text-sm font-medium text-cyan-300 mt-1">
          ようこそ、<span class="font-bold ml-1"><%= current_user.last_name %></span> さん
        </div>
      <% end %>
    </div>

    <!-- メニューリスト -->
    <div class="relative hidden lg:block">
      <ul class="menu menu-horizontal px-2">
        <li>
          <details class="dropdown dropdown-end">
            <!-- トリガーボタン -->
            <summary class="btn btn-outline text-cyan-300 hover:text-white hover:bg-sky-700">
              メニューリスト
            </summary>
            <!-- ドロップダウンメニュー -->
            <ul class="dropdown-content bg-sky-900 rounded-lg p-2 shadow-lg w-56">
              <% if user_signed_in? %>
                <li>
                  <%= button_to "ログアウト", destroy_user_session_path, method: :delete, data: { turbo_confirm: "本当にログアウトしますか？" }, class: "btn bg-white text-cyan-500 hover:bg-cyan-600 w-full h-12 rounded-md shadow-md" %>
                </li>
                <br>
                <li>
                  <%= link_to "招待URLを発行", team_invitations_path, class: "btn bg-white text-cyan-500 hover:bg-cyan-600 w-full h-12 rounded-md shadow-md" %>
                </li>
                <br>
                <li>
                  <%= link_to "登録状況一覧", athletes_team_path(@team), class: "btn bg-white text-cyan-500 hover:bg-cyan-600 w-full h-12 rounded-md shadow-md" %>
                </li>
                <br>
                <li>
                  <%= link_to "ダッシュボード", self_records_path, class: "btn bg-white text-cyan-500 hover:bg-cyan-600 w-full h-12 rounded-md shadow-md" %>
                </li>
              <% else %>
                <li>
                  <%= link_to "新規登録", new_user_registration_path, class: "btn bg-white text-cyan-500 hover:bg-cyan-600 w-full h-12 rounded-md shadow-md" %>
                </li>
                <br>
                <li>
                  <%= link_to "ログイン", new_user_session_path, class: "btn bg-white text-cyan-500 hover:bg-cyan-600 w-full h-12 rounded-md shadow-md" %>
                </li>
              <% end %>
            </ul>
          </details>
        </li>
      </ul>
    </div>

    <!-- ハンバーガーメニュー (スマホ画面用) -->
    <button id="hamburger-toggle" class="btn btn-square lg:hidden text-white bg-sky-900 hover:bg-sky-700">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16m-7 6h7" />
      </svg>
    </button>
  </div>

  <!-- モバイルメニュー -->
  <nav id="mobile-menu" class="hidden lg:hidden bg-sky-900">
    <ul class="p-4">
      <li>
        <%= link_to "自己記録", self_records_path, class: "block btn btn-link text-cyan-300 hover:text-white" %>
      </li>
      <li>
        <%= link_to "コンディション", conditions_path, class: "block btn btn-link text-cyan-300 hover:text-white" %>
      </li>
      <li>
        <%= link_to "フィジカル", bodies_path, class: "block btn btn-link text-cyan-300 hover:text-white" %>
      </li>
      <li>
        <%= link_to "トレーニング", training_menus_path, class: "block btn btn-link text-cyan-300 hover:text-white" %>
      </li>
    </ul>
  </nav>
</header>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const toggleButton = document.getElementById("hamburger-toggle");
    const mobileMenu = document.getElementById("mobile-menu");

    toggleButton.addEventListener("click", () => {
      mobileMenu.classList.toggle("hidden");
    });
  });
</script>
